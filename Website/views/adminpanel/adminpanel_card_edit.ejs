<!DOCTYPE html>
<html lang="en">

    <head>

        <%- include('../partials/standard_header.ejs') %>

        <title>WaifuCollector | Adminpanel Cards</title>

        <link rel="stylesheet" href="<%= url %>/resources/css/adminpanel.css">
        <link rel="stylesheet" href="<%= url %>/resources/css/adminpanel_sidebar.css">

        <link rel="stylesheet" href="<%= url %>/resources/css/forms.css">

        <style>

            .nav{

                position: fixed;
                top: 0;
                left: 0;

                box-shadow: 0px 1px 8px rgba(0, 0, 0, 0.5);

            }

            .waifu:last-child{

                padding-bottom: 100px;

            }

        </style>

    </head>

    <body class="scrollable">

        <%- include('../partials/nav.ejs') %>

        <div class="sidebar">

            <%- include('partials/admin_nav.ejs') %>

        </div>

        <div class="adminpanel_content">

            <% if(card != undefined){ %>

                <div class="grid_12 waifu">

                    <div class="admin_card">
        
                        <div class="admin_card-content">
        
                            <div class="grid_12">

                                <span style="font-size: 50px;"><%= card['name'] %></span>
                                <span style="margin-left: 5px; font-size: 25px; color: gray;"><%= card['animeName'] %></span>

                            </div>

                            <div class="grid_6" style="margin-top: 10px;">

                                <form action="<%= api_url %>/card/<%= card['id'] %>/update?redirUrl=<%= url %>/adminpanel/card/<%= card['id'] %>/edit" method="POST" enctype="multipart/form-data">

                                    <input class="grid_6" type="text" value="<%= card['name'] %>" name="name">

                                    <% if(animes != undefined){ %>

                                        <select class="grid_6 clearme" name="anime" style="margin-top: 10px;">

                                            <% animes.forEach(function(anime){

                                                var selected = "";

                                                if(anime['id'] == card['animeID'])
                                                    selected = 'selected="selected"';

                                                %>

                                                <option value="<%= anime['id'] %>" <%= selected %>><%= anime['name'] %></option>

                                            <% }); %>

                                        </select>

                                    <% } %>
                                    
                                    <div class="grid_4 clearme" style="margin-top: 10px;">

                                        <label>Change Image</label>
                                        <input type="file" name="image" style="margin-top: 5px;" />

                                    </div>

                                    <input class="grid_3 clearme" type="submit" name="submit" style="margin: 10px 0px;" value="Update">

                                </form>

                            </div>

                            <img src="<%= card['image'] %>" class="grid_3" style="float: right; box-shadow: 0px 5px 10px rgba(0, 0, 0, 0.5); border-radius: 10px;" alt="Card Image" />
        
                        </div>
        
                    </div>
        
                </div>

            <% } %>

        </div>

        <script
        src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
        crossorigin="anonymous"></script>

        <script src="<%= url %>/resources/components.js"></script>
        
    </body>

</html>
